<!DOCTYPE html>
<html lang="en" data-theme="dark">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{% block title %}Legal Assistant{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}" />
    {% block head %}{% endblock %}
</head>
<body>
<div class="layout">
    <aside class="sidebar" id="sidebar">
        <div class="logo">Legal AI Assistant</div>
        <nav>
            {% for ep, label, url in nav_links %}
            <a href="{{ url }}" class="{% if request.endpoint==ep %}active{% endif %}">{{ label }}</a>
            {% endfor %}
        </nav>
    </aside>
    <div class="main-panel">
        <header class="topbar">
            <button id="menu-button" class="icon-button">☰</button>
            <div class="top-search"><input type="search" placeholder="Search..." /></div>
            <button id="help-button" class="icon-button popover" data-popover="About">❓</button>
            <button id="settings-button" class="icon-button popover" data-popover="Settings">⚙️</button>
        </header>
        <main class="container">
            {% block content %}{% endblock %}
        </main>
    </div>
</div>
<aside id="settings-drawer" class="drawer">
    <div class="drawer-header">
        <h2>Settings</h2>
        <button id="drawer-close" class="icon-button">×</button>
    </div>
    <form id="settings-form">
        <label>Provider
            <select name="provider">
                <option value="openai" {% if settings.provider == 'openai' %}selected{% endif %}>OpenAI</option>
                <option value="azure" {% if settings.provider == 'azure' %}selected{% endif %}>Azure</option>
            </select>
        </label>
        <label>Model
            <input type="text" name="model" value="{{ settings.model }}" />
        </label>
        <label>OpenAI API Key
            <input type="password" name="openai_key" value="{{ settings.openai_key }}" />
        </label>
        <label>Azure API Key
            <input type="password" name="azure_key" value="{{ settings.azure_key }}" />
        </label>
        <label>Azure Endpoint
            <input type="text" name="azure_endpoint" value="{{ settings.azure_endpoint }}" />
        </label>
        <label>Theme
            <select id="theme-select">
                <option value="dark">Dark</option>
                <option value="light">Light</option>
            </select>
        </label>
        <button type="submit" class="btn btn-primary">Save</button>
    </form>
    <form id="sync-db-form" action="{{ url_for('sync_db') }}" method="post">
        <button type="submit" class="btn btn-secondary">Sync Database</button>
    </form>
</aside>
<div id="command-palette" class="palette hidden">
    <input type="text" id="command-input" placeholder="Type a command..." autocomplete="off" />
    <ul id="command-list"></ul>
</div>
<div id="toast-container"></div>
<div id="help-modal" class="modal-backdrop hidden">
    <div class="modal">
        <div class="modal-header">
            <h2>About</h2>
            <button id="help-close" class="icon-button">×</button>
        </div>
        <p>Legal AI Assistant interface prototype.</p>
    </div>
</div>
<script src="{{ url_for('static', filename='ui.js') }}"></script>
{% block scripts %}{% endblock %}
</body>
</html>
